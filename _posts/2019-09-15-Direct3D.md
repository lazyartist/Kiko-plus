---
layout: post
title: "Direct3D"
description: ""
date: 2019-09-15 19:00:00+09:00
tags: [Direct3D]
comments: true
share: true
---

[TOC]



## COM(Component Object Model)

- 응용 프로그램 이진 인터페이스
- 프로그램이나 시스템을 이루는 컴포넌트들이 상호 통신할 수 있도록 하는 메커니즘
  - 서로 다른 프로그램들이 서로 통신할 수 있도록 하는 명세
- 컴포넌트란
  - .ocx, .dll, .exe를 확장자로 갖는 실행 가능한 바이너리 파일
- 특징
  - 언어 독립성
    - 서로 다른 언어로 작성된 컴포넌트들이 COM을 지원하는 툴로 만들어졋다면 마치 동일한 개발 도구로 생성한 프로그램 모듈처럼 상호 통신할 수 있다.
  - Binary Standard
    - 다른 플랫폼으로 작성된 프로그램의 소스코드가 없이 binary 파일만 있어도 사용할 수 있다.
  - Version Control
    - 새로운 기능을 모듈에 추가할 수 있다.
    - 새로운 기능과 이전 기능을 클라이언트 요청에 따라 동시에 제공할 수 있다.
  - Location Transparency
    - 컴포넌트가 물리적 위치에 관계없이 다른 컴포넌트 혹은 컴포넌트 클라이언트에 의해 사용될 수 있다.
    - In-process
      - .dll, .ocx
      - 컴포넌트 클라이언트의 메모리 영역으로 로드되어 사용됨
    - Out-of-process
      - .exe
      - 컴포넌트 클라이언트와 동일한 머신에서 수행
    - Out-of-machine(네트워크를 통한 리모트 머신)
      - .exe
      - 컴포넌트 클라이언트와 네트워크로 연결된 다른 머신에서 수행
- Interface
  - COM이 제공하는 기능
  - COM 컴포넌트는 하나 이상의 인터페이스를 제공해야한다.
  - COM 객체가 제공하는 기능을 기술한 것
    - 바이너리 파일로 배포되는 COM 컴포넌트가 자신이 제공하는 기능을 이를 사용하려는 프로그램에 알려줄 수 있는 방법이 필요하기 때문



## Direct3D와 다른 시스템 컴포넌트와의 관계도


<svg xmlns="http://www.w3.org/2000/svg" width="662" height="284.1111145019531" style="
        width:662px;
        height:284.1111145019531px;
        background: #FFF;
        fill: none;
">
        <svg xmlns="http://www.w3.org/2000/svg"><g><defs><pattern id=".2845496072733278" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"/></pattern></defs><rect width="100%" height="100%" fill="url(#.2845496072733278)" stroke="lightgray" stroke-width="0.5"/></g></svg>
        <svg xmlns="http://www.w3.org/2000/svg" class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g/></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M261,81 L261,38" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/><g stroke="#000" transform="matrix(3.061616997868383e-16,1,-1,3.061616997868383e-16,261,36)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"/></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M192.12,139 L243.23,104.13" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/><g stroke="#000" transform="matrix(-0.8259999280643188,0.5636702217056886,-0.5636702217056886,-0.8259999280643188,244.87931034482756,103)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"/></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M367.51,194 L273.93,104.38" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/><g stroke="#000" transform="matrix(0.7222432592616973,0.6916391215446396,-0.6916391215446396,0.7222432592616973,272.4867256637168,103)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"/></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M338.4,194 L218.53,161.52" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/><g stroke="#000" transform="matrix(0.9651993018659998,0.261515406195097,-0.261515406195097,0.9651993018659998,216.6,161)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"/></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M389.11,194 L469.54,106.47" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/><g stroke="#000" transform="matrix(-0.6766189820945451,0.7363333165553095,-0.7363333165553095,-0.6766189820945451,470.8918918918918,105)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"/></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M481.33,83 L482.61,40" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/><g stroke="#000" transform="matrix(-0.0298406997386805,0.9995546671588833,-0.9995546671588833,-0.0298406997386805,482.6716417910448,38)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"/></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M378.23,241 L378.72,218" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/><g stroke="#000" transform="matrix(-0.02129140789487423,0.9997733122812661,-0.9997733122812661,-0.02129140789487423,378.76595744680856,216)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"/></g></g></g></g><g><g><rect rx="0" ry="0" x="419" y="16" width="128" height="22" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/></g><g><rect rx="0" ry="0" x="197" y="14" width="128" height="22" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/></g><g><rect rx="0" ry="0" x="214" y="81" width="94" height="22" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/></g><g><rect rx="0" ry="0" x="132.5" y="139" width="87" height="22" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/></g><g><rect rx="0" ry="0" x="281" y="194" width="196" height="22" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/></g><g><rect rx="0" ry="0" x="463.5" y="83" width="35" height="22" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/></g><g><rect rx="0" ry="0" x="309.5" y="241" width="137" height="22" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none;"/></g></g><!-- react-empty: 11581 --></svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="660" height="282.1111145019531" style="width:660px;height:282.1111145019531px;font-family:Asana-Math, Asana;background:#FFF;"><g><g><text x="201.37847900390625" y="16.555557250976562" style="white-space:pre;stroke:none;fill:rgb(0, 0, 0);font-size:15px;font-family:Arial, Helvetica, sans-serif;font-weight:400;font-style:normal;dominant-baseline:text-before-edge;text-decoration:none solid rgb(0, 0, 0);">Win32 Application</text></g></g><g><g><text x="423.37847900390625" y="18.555557250976562" style="white-space:pre;stroke:none;fill:rgb(0, 0, 0);font-size:15px;font-family:Arial, Helvetica, sans-serif;font-weight:400;font-style:normal;dominant-baseline:text-before-edge;text-decoration:none solid rgb(0, 0, 0);">Win32 Application</text></g></g><g><g><text x="201.37847900390625" y="16.555557250976562" style="white-space:pre;stroke:none;fill:rgb(0, 0, 0);font-size:15px;font-family:Arial, Helvetica, sans-serif;font-weight:400;font-style:normal;dominant-baseline:text-before-edge;text-decoration:none solid rgb(0, 0, 0);">Win32 Application</text></g></g><g><g><text x="218.06597900390625" y="83.55557250976562" style="white-space:pre;stroke:none;fill:rgb(0, 0, 0);font-size:15px;font-family:Arial, Helvetica, sans-serif;font-weight:400;font-style:normal;dominant-baseline:text-before-edge;text-decoration:none solid rgb(0, 0, 0);">Direct3D API</text></g></g><g><g><text x="136.67709350585938" y="141.55557250976562" style="white-space:pre;stroke:none;fill:rgb(0, 0, 0);font-size:15px;font-family:Arial, Helvetica, sans-serif;font-weight:400;font-style:normal;dominant-baseline:text-before-edge;text-decoration:none solid rgb(0, 0, 0);">HAL Device</text></g></g><g><g><text x="284.8125" y="196.55557250976562" style="white-space:pre;stroke:none;fill:rgb(0, 0, 0);font-size:15px;font-family:Arial, Helvetica, sans-serif;font-weight:400;font-style:normal;dominant-baseline:text-before-edge;text-decoration:none solid rgb(0, 0, 0);">Device Driver Interface(DDI)</text></g></g><g><g><text x="467.6632080078125" y="85.55557250976562" style="white-space:pre;stroke:none;fill:rgb(0, 0, 0);font-size:15px;font-family:Arial, Helvetica, sans-serif;font-weight:400;font-style:normal;dominant-baseline:text-before-edge;text-decoration:none solid rgb(0, 0, 0);">GDI</text></g></g><g><g><text x="313.39239501953125" y="243.55557250976562" style="white-space:pre;stroke:none;fill:rgb(0, 0, 0);font-size:15px;font-family:Arial, Helvetica, sans-serif;font-weight:400;font-style:normal;dominant-baseline:text-before-edge;text-decoration:none solid rgb(0, 0, 0);">Graphics Hardware</text></g></g></svg>
</svg>


- HAL(Hardware Abstraction Layer)
  - 하드웨어 추상화 계층
  - 컴퓨터의 물리적인 하드웨어와 컴퓨터에서 실행되는 소프트웨어 사이의 추상화 계층
  - 하드웨어의 차이를 숨겨서 응용 프로그램이 작동할 수 있는 일관된 플랫폼을 제공
  - 하드웨어 가속을 사용하므로 빠르지만 특정 하드웨어에서는 안돌아갈 수 있다.
- Reference Device
  - 하드웨어 가속을 하지 않는다.
  - 범용적이지만 느리다.
- GDI(Graphics Device Interface)
  - 응용프로그램에서 그래픽 관련 하드웨어를 사용할 수 있게 한다.
  - Bitmap, Brush, Color, Font, Pen, Video Display, Printer, ...
- DDI(Device Driver Interface)

  - 하드웨어 설치 후 운영체제에 설치하는 소프트웨어
  - 드라이버



## Windows10에서 DirectX SDK 설치

- 2012 11월 Windows8.0부터 Windows SDK에 DirectX SDK가 포함되어 따로 설치할 필요가 없다.
- 단, 일부 기능이 미지원될 수 있다.



## Direct3D 초기화 및 생성





## Direct3D 구조

### Direct3D 그래픽 파이프라인 구조

- 입력 조립기
- 정점 셰이더
- 덮개 셰이더
- 테셀레이터
- 영역 셰이더
- 기하 셰이더
  - 스트림 출력
- 래스터화
- 픽셀 셰이더
- 출력 병합기







# 참고

- https://abipictures.tistory.com/115
- [https://vallista.tistory.com/entry/DX-9-Direct3D-%EC%8B%9C%EC%9E%91](https://vallista.tistory.com/entry/DX-9-Direct3D-시작)

